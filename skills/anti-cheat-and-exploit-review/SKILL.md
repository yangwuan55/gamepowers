---
name: anti-cheat-and-exploit-review
description: Use when 需要识别作弊与漏洞利用路径，并建立检测、处置与回滚的风控体系
---

# 反作弊与漏洞审查（严格流程）

## 适用条件
- 需要评估玩法、经济、活动中的作弊与漏洞风险。
- 需要建立分级检测、处置和误判回滚机制。

## 输入契约
必填输入：
- 机制、经济、埋点文档。
- 资产安全边界与服务端能力约束。
- 可接受误判率与处置时效目标。

可选输入：
- 历史封禁案例、外挂样本、攻击日志。

输入缺失处理：一次只问一个问题，不并发追问。

## 设计步骤
1. 攻击面识别：梳理客户端、服务端、网络与经济攻击面。
完成定义：关键攻击面均有风险入口说明。
2. 利用路径建模：定义作弊链路、前置条件与收益模型。
完成定义：高风险路径可重现且可验证。
3. 检测策略设计：定义规则检测、行为检测与异常检测组合。
完成定义：每条高风险路径都有检测点。
4. 处置与回滚策略：定义分级处置、人工复核和误判回滚。
完成定义：处置链路具备时效目标和责任归口。
5. 映射执行任务：把检测和处置流程映射到任务与验收。
完成定义：任务可追溯文档并可同步 `bd`。

## 输出工件
- 主文档：`docs/gamepowers/anti-cheat/risk-model.md`
- 审查输入：`docs/gamepowers/economy/economy-model.md`、`docs/gamepowers/telemetry/kpi-and-events.md`（建议区）
- 任务映射证据：`docs/gamepowers/index/task-doc-map.yaml`

## 质量门禁
- 风险分级、检测策略、处置策略、回滚机制齐备。
- 高风险链路必须具备检测和复核路径。
- 反作弊任务可同步到 `bd` 且可审计。

## 风险与缓解
- 风险：检测规则过严导致误封。
缓解：分级阈值 + 人工复核 + 快速回滚通道。
- 风险：只做单点检测导致绕过。
缓解：规则、行为、统计三类检测联合部署。

## 与 ECS/协调层联动
- 反作弊实现任务统一标注 `architecture: ECS` 并关联事件流与性能预算文档。
- 与 `ecs-architecture-designer` 对齐检测时机、数据采样和系统开销。
- 由 `game-design-orchestrator` 统一推进映射更新与 `bd` 同步。

## 反模式（禁止）
- 只列风险，不定义检测和处置链路。
- 覆盖经济或埋点文档主结论。
- 缺失误判回滚机制就上线策略。

## 完成判定
- 风险模型可直接指导实现与运营处置。
- 检测/处置/回滚链路完整可执行。
- 与 ECS 约束和任务映射链路一致。
