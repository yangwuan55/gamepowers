---
name: combat-and-roles-designer
description: Use when 需要设计战斗节奏、角色定位与协同关系，并形成可平衡的角色体系
---

# 战斗与角色设计（严格流程）

## 适用条件
- 需要定义角色定位、队伍协同和战斗节奏。
- 需要把角色设计与机制规则、成长节奏对齐。

## 输入契约
必填输入：
- 机制规格：`docs/gamepowers/gameplay/mechanics-spec.md`
- 循环规格：`docs/gamepowers/gameplay/core-loop-spec.md`
- 愿景文档：`docs/gamepowers/gameplay/gameplay-vision.md`

可选输入：
- 现有角色池、职业偏好数据、战斗日志。

输入缺失处理：一次只问一个问题，不并发追问。

## 设计步骤
1. 职能框架定义：定义前排/输出/辅助/控制等职责边界。
完成定义：每个角色类别有明确贡献与短板。
2. 交互关系设计：建立克制、协同与反制关系矩阵。
完成定义：任意两类角色关系可解释且可验证。
3. 战斗节奏锚点：定义开局、中段、终局的节奏目标。
完成定义：每阶段有可观测目标与触发条件。
4. 角色成长轨道：定义角色在成长系统中的能力演进。
完成定义：成长后能力变化不破坏定位边界。
5. 可执行验证：输出关键阵容样例与异常对局处理。
完成定义：至少覆盖优势、劣势、镜像三类场景。

## 输出工件
- 主文档：`docs/gamepowers/characters/character-roster.md`
- 审查输入：`docs/gamepowers/skills/skill-system-spec.md`（建议区）
- 任务映射证据：`docs/gamepowers/index/task-doc-map.yaml`

## 质量门禁
- 角色定位互斥且完整，无职责重叠死角。
- 克制与协同关系可落地到机制规则。
- 关键角色任务都能映射文档路径与 `bd` 任务。

## 风险与缓解
- 风险：角色同质化导致阵容单一。
缓解：强制保留功能差异与反制窗口。
- 风险：成长后角色越界破坏战斗结构。
缓解：设置定位红线并与平衡框架联审。

## 与 ECS/协调层联动
- 角色相关技术任务标记 `architecture: ECS`，并引用实体/组件设计文档。
- 通过 `game-design-orchestrator` 同步角色变更到任务映射与 `bd`。
- 与 `ecs-architecture-designer` 对齐角色状态归属与事件触发边界。

## 反模式（禁止）
- 仅按“强度”定义角色，不定义功能定位。
- 直接覆盖技能系统主规则定义。
- 忽略异常对局（极端阵容、镜像循环）验证。

## 完成判定
- 角色体系可支撑机制、成长与平衡联动。
- 角色文档可被实现任务直接引用。
- ECS 相关约束与任务映射完整。
